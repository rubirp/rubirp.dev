---
import { localizePath } from "astro-i18next";
import { t, changeLanguage } from "i18next";
import { Trans } from "astro-i18next/components";
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";

changeLanguage("es");

const personal_projects = await getCollection("projects", ({ data }) => {
    return data.category === "personal";
});
personal_projects.sort((a, b) => {
    //@ts-ignore
    return a.data.priority - b.data.priority;
});
const professional_projects = await getCollection("projects", ({ data }) => {
    return data.category === "professional";
});
professional_projects.sort((a, b) => {
    //@ts-ignore
    return a.data.priority - b.data.priority;
});
---

<BaseLayout title={t("home.title")} description={t("home.description")} sideBarActiveItemID="home">

	<div class="pb-12">
		<h2 class="text-xl py-1">{t("home.intro-t1")}</h2>
		<h1 class="text-5xl font-bold">{t("home.intro-t2")}</h1>
		<h2 class="text-3xl py-3 font-bold">{t("home.intro-t3")}</h2>
		<div class="py-2 flex flex-col gap-y-6">

			<Trans i18nKey="home.intro-d">
				<text class="text-lg"></text>
				<b></b>
				<u></u>
				<a href="https://frasquitogames.com/" target="_blank"></a>
				<a href={localizePath("/cv")}></a>
				<a href={localizePath("/projects")}></a>
			</Trans>

			<div class="mt-8">
				<a class="btn" href="mailto:contact.rubi_almansa@hotmail.com" target="_blank" referrerpolicy="no-referrer-when-downgrade">{t("home.intro-btn1")}</a>
		  	</div>
			
		</div>
	</div>

	
	<Trans i18nKey="home.projects-pro-t">
		<h2 class="text-3xl w-full font-bold mb-2"></h2>
		<u></u>
		<a href="https://pogo.com/" target="_blank"></a>
	</Trans>

	<ul>
	{
		professional_projects.map((project) => (
			<HorizontalCard
				title={project.data.title}
				excerpt={project.data.excerpt}
				img={project.data.thumbnail}
				url={localizePath("/projects/" + project.slug)}
				category = {project.data.category}
				tags = {project.data.tags}
			/>
		)) 
	}
	</ul>

	<Trans i18nKey="home.projects-per-t">
		<h2 class="text-3xl w-full font-bold mb-2 mt-10"></h2>
		<u></u>
		<a href="https://frasquitogames.com/" target="_blank"></a>
	</Trans>

	<ul>
	{
		personal_projects.map((project) => (
			<HorizontalCard
				title={project.data.title}
				excerpt={project.data.excerpt}
				img={project.data.thumbnail}
				url={localizePath("/projects/" + project.slug)}
				category = {project.data.category}
				tags = {project.data.tags}
			/>
		)) 
	}
	</ul>
</BaseLayout>